!function e(t,n,r){function a(o,s){if(!n[o]){if(!t[o]){var u="function"==typeof require&&require;if(!s&&u)return u(o,!0);if(i)return i(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var h=n[o]={exports:{}};t[o][0].call(h.exports,function(e){var n=t[o][1][e];return a(n?n:e)},h,h.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)a(r[o]);return a}({1:[function(e,t,n){"use strict";function r(e,t,n,r){return this.validateSchema(e,r,t,n).valid}function a(e,t,n,r,a,i){if(!t.properties||void 0===t.properties[a])if(t.additionalProperties===!1)i.addError({name:"additionalProperties",argument:a,message:"additionalProperty "+JSON.stringify(a)+" exists in instance when not allowed"});else{var o=t.additionalProperties||{},s=this.validateSchema(e[a],o,n,r.makeChild(o,a));s.instance!==i.instance[a]&&(i.instance[a]=s.instance),i.importErrors(s)}}function i(e,t,n){var r,a=n.length;for(r=t+1,a;r<a;r++)if(o.deepCompareStrict(e,n[r]))return!1;return!0}var o=e("./helpers"),s=o.ValidatorResult,u=o.SchemaError,c={};c.ignoreProperties={id:!0,default:!0,description:!0,title:!0,exclusiveMinimum:!0,exclusiveMaximum:!0,additionalItems:!0,$schema:!0,$ref:!0,extends:!0};var h=c.validators={};h.type=function(e,t,n,r){if(void 0===e)return null;var a=new s(e,t,n,r),i=t.type instanceof Array?t.type:[t.type];if(!i.some(this.testType.bind(this,e,t,n,r))){var o=i.map(function(e){return e.id&&"<"+e.id+">"||e+""});a.addError({name:"type",argument:o,message:"is not of a type(s) "+o})}return a},h.anyOf=function(e,t,n,a){if(void 0===e)return null;var i=new s(e,t,n,a);if(!(t.anyOf instanceof Array))throw new u("anyOf must be an array");if(!t.anyOf.some(r.bind(this,e,n,a))){var o=t.anyOf.map(function(e,t){return e.id&&"<"+e.id+">"||e.title&&JSON.stringify(e.title)||e.$ref&&"<"+e.$ref+">"||"[subschema "+t+"]"});i.addError({name:"anyOf",argument:o,message:"is not any of "+o.join(",")})}return i},h.allOf=function(e,t,n,r){if(void 0===e)return null;if(!(t.allOf instanceof Array))throw new u("allOf must be an array");var a=new s(e,t,n,r),i=this;return t.allOf.forEach(function(t,o){var s=i.validateSchema(e,t,n,r);if(!s.valid){var u=t.id&&"<"+t.id+">"||t.title&&JSON.stringify(t.title)||t.$ref&&"<"+t.$ref+">"||"[subschema "+o+"]";a.addError({name:"allOf",argument:{id:u,length:s.errors.length,valid:s},message:"does not match allOf schema "+u+" with "+s.errors.length+" error[s]:"}),a.importErrors(s)}}),a},h.oneOf=function(e,t,n,a){if(void 0===e)return null;if(!(t.oneOf instanceof Array))throw new u("oneOf must be an array");var i=new s(e,t,n,a),o=t.oneOf.filter(r.bind(this,e,n,a)).length,c=t.oneOf.map(function(e,t){return e.id&&"<"+e.id+">"||e.title&&JSON.stringify(e.title)||e.$ref&&"<"+e.$ref+">"||"[subschema "+t+"]"});return 1!==o&&i.addError({name:"oneOf",argument:c,message:"is not exactly one from "+c.join(",")}),i},h.properties=function(e,t,n,r){if(void 0!==e&&e instanceof Object){var a=new s(e,t,n,r),i=t.properties||{};for(var o in i){var u=(e||void 0)&&e[o],c=this.validateSchema(u,i[o],n,r.makeChild(i[o],o));c.instance!==a.instance[o]&&(a.instance[o]=c.instance),a.importErrors(c)}return a}},h.patternProperties=function(e,t,n,r){if(void 0!==e&&this.types.object(e)){var i=new s(e,t,n,r),o=t.patternProperties||{};for(var u in e){var c=!0;for(var h in o){var d=new RegExp(h);if(d.test(u)){c=!1;var l=this.validateSchema(e[u],o[h],n,r.makeChild(o[h],u));l.instance!==i.instance[u]&&(i.instance[u]=l.instance),i.importErrors(l)}}c&&a.call(this,e,t,n,r,u,i)}return i}},h.additionalProperties=function(e,t,n,r){if(void 0!==e&&this.types.object(e)){if(t.patternProperties)return null;var i=new s(e,t,n,r);for(var o in e)a.call(this,e,t,n,r,o,i);return i}},h.minProperties=function(e,t,n,r){if(!e||"object"!=typeof e)return null;var a=new s(e,t,n,r),i=Object.keys(e);return i.length>=t.minProperties||a.addError({name:"minProperties",argument:t.minProperties,message:"does not meet minimum property length of "+t.minProperties}),a},h.maxProperties=function(e,t,n,r){if(!e||"object"!=typeof e)return null;var a=new s(e,t,n,r),i=Object.keys(e);return i.length<=t.maxProperties||a.addError({name:"maxProperties",argument:t.maxProperties,message:"does not meet maximum property length of "+t.maxProperties}),a},h.items=function(e,t,n,r){if(!(e instanceof Array))return null;var a=this,i=new s(e,t,n,r);return void 0!==e&&t.items?(e.every(function(e,o){var s=t.items instanceof Array?t.items[o]||t.additionalItems:t.items;if(void 0===s)return!0;if(s===!1)return i.addError({name:"items",message:"additionalItems not permitted"}),!1;var u=a.validateSchema(e,s,n,r.makeChild(s,o));return u.instance!==i.instance[o]&&(i.instance[o]=u.instance),i.importErrors(u),!0}),i):i},h.minimum=function(e,t,n,r){if("number"!=typeof e)return null;var a=new s(e,t,n,r),i=!0;return i=t.exclusiveMinimum&&t.exclusiveMinimum===!0?e>t.minimum:e>=t.minimum,i||a.addError({name:"minimum",argument:t.minimum,message:"must have a minimum value of "+t.minimum}),a},h.maximum=function(e,t,n,r){if("number"!=typeof e)return null;var a,i=new s(e,t,n,r);return a=t.exclusiveMaximum&&t.exclusiveMaximum===!0?e<t.maximum:e<=t.maximum,a||i.addError({name:"maximum",argument:t.maximum,message:"must have a maximum value of "+t.maximum}),i},h.divisibleBy=function(e,t,n,r){if("number"!=typeof e)return null;if(0==t.divisibleBy)throw new u("divisibleBy cannot be zero");var a=new s(e,t,n,r);return e/t.divisibleBy%1&&a.addError({name:"divisibleBy",argument:t.divisibleBy,message:"is not divisible by (multiple of) "+JSON.stringify(t.divisibleBy)}),a},h.multipleOf=function(e,t,n,r){if("number"!=typeof e)return null;if(0==t.multipleOf)throw new u("multipleOf cannot be zero");var a=new s(e,t,n,r);return e/t.multipleOf%1&&a.addError({name:"multipleOf",argument:t.multipleOf,message:"is not a multiple of (divisible by) "+JSON.stringify(t.multipleOf)}),a},h.required=function(e,t,n,r){var a=new s(e,t,n,r);return void 0===e&&t.required===!0?a.addError({name:"required",message:"is required"}):e&&"object"==typeof e&&Array.isArray(t.required)&&t.required.forEach(function(t){void 0===e[t]&&a.addError({name:"required",argument:t,message:"requires property "+JSON.stringify(t)})}),a},h.pattern=function(e,t,n,r){if("string"!=typeof e)return null;var a=new s(e,t,n,r);return e.match(t.pattern)||a.addError({name:"pattern",argument:t.pattern,message:"does not match pattern "+JSON.stringify(t.pattern)}),a},h.format=function(e,t,n,r){var a=new s(e,t,n,r);return a.disableFormat||o.isFormat(e,t.format,this)||a.addError({name:"format",argument:t.format,message:"does not conform to the "+JSON.stringify(t.format)+" format"}),a},h.minLength=function(e,t,n,r){if("string"!=typeof e)return null;var a=new s(e,t,n,r);return e.length>=t.minLength||a.addError({name:"minLength",argument:t.minLength,message:"does not meet minimum length of "+t.minLength}),a},h.maxLength=function(e,t,n,r){if("string"!=typeof e)return null;var a=new s(e,t,n,r);return e.length<=t.maxLength||a.addError({name:"maxLength",argument:t.maxLength,message:"does not meet maximum length of "+t.maxLength}),a},h.minItems=function(e,t,n,r){if(!(e instanceof Array))return null;var a=new s(e,t,n,r);return e.length>=t.minItems||a.addError({name:"minItems",argument:t.minItems,message:"does not meet minimum length of "+t.minItems}),a},h.maxItems=function(e,t,n,r){if(!(e instanceof Array))return null;var a=new s(e,t,n,r);return e.length<=t.maxItems||a.addError({name:"maxItems",argument:t.maxItems,message:"does not meet maximum length of "+t.maxItems}),a},h.uniqueItems=function(e,t,n,r){function a(e,t,n){for(var r=t+1;r<n.length;r++)if(o.deepCompareStrict(e,n[r]))return!1;return!0}var i=new s(e,t,n,r);return e instanceof Array?(e.every(a)||i.addError({name:"uniqueItems",message:"contains duplicate item"}),i):i},h.uniqueItems=function(e,t,n,r){if(!(e instanceof Array))return null;var a=new s(e,t,n,r);return e.every(i)||a.addError({name:"uniqueItems",message:"contains duplicate item"}),a},h.dependencies=function(e,t,n,r){if(!e||"object"!=typeof e)return null;var a=new s(e,t,n,r);for(var i in t.dependencies)if(void 0!==e[i]){var o=t.dependencies[i],u=r.makeChild(o,i);if("string"==typeof o&&(o=[o]),o instanceof Array)o.forEach(function(t){void 0===e[t]&&a.addError({name:"dependencies",argument:u.propertyPath,message:"property "+t+" not found, required by "+u.propertyPath})});else{var c=this.validateSchema(e,o,n,u);a.instance!==c.instance&&(a.instance=c.instance),c&&c.errors.length&&(a.addError({name:"dependencies",argument:u.propertyPath,message:"does not meet dependency required by "+u.propertyPath}),a.importErrors(c))}}return a},h.enum=function(e,t,n,r){if(!(t.enum instanceof Array))throw new u("enum expects an array",t);if(void 0===e)return null;var a=new s(e,t,n,r);return t.enum.some(o.deepCompareStrict.bind(null,e))||a.addError({name:"enum",argument:t.enum,message:"is not one of enum values: "+t.enum.join(",")}),a},h.not=h.disallow=function(e,t,n,r){var a=this;if(void 0===e)return null;var i=new s(e,t,n,r),o=t.not||t.disallow;return o?(o instanceof Array||(o=[o]),o.forEach(function(o){if(a.testType(e,t,n,r,o)){var s=o&&o.id&&"<"+o.id+">"||o;i.addError({name:"not",argument:s,message:"is of prohibited type "+s})}}),i):null},t.exports=c},{"./helpers":2}],2:[function(e,t,n){"use strict";var r=e("url"),a=n.ValidationError=function(e,t,n,r,a,i){r&&(this.property=r),e&&(this.message=e),n&&(n.id?this.schema=n.id:this.schema=n),t&&(this.instance=t),this.name=a,this.argument=i,this.stack=this.toString()};a.prototype.toString=function(){return this.property+" "+this.message};var i=n.ValidatorResult=function(e,t,n,r){this.instance=e,this.schema=t,this.propertyPath=r.propertyPath,this.errors=[],this.throwError=n&&n.throwError,this.disableFormat=n&&n.disableFormat===!0};i.prototype.addError=function(e){var t;if("string"==typeof e)t=new a(e,this.instance,this.schema,this.propertyPath);else{if(!e)throw new Error("Missing error detail");if(!e.message)throw new Error("Missing error message");if(!e.name)throw new Error("Missing validator type");t=new a(e.message,this.instance,this.schema,this.propertyPath,e.name,e.argument)}if(this.throwError)throw t;return this.errors.push(t),t},i.prototype.importErrors=function(e){if("string"==typeof e||e&&e.validatorType)this.addError(e);else if(e&&e.errors){var t=this.errors;e.errors.forEach(function(e){t.push(e)})}},i.prototype.toString=function(e){return this.errors.map(function(e,t){return t+": "+e.toString()+"\n"}).join("")},Object.defineProperty(i.prototype,"valid",{get:function(){return!this.errors.length}});var o=n.SchemaError=function e(t,n){this.message=t,this.schema=n,Error.call(this,t),Error.captureStackTrace(this,e)};o.prototype=Object.create(Error.prototype,{constructor:{value:o,enumerable:!1},name:{value:"SchemaError",enumerable:!1}});var s=n.SchemaContext=function(e,t,n,r,a){this.schema=e,this.options=t,this.propertyPath=n,this.base=r,this.schemas=a};s.prototype.resolve=function(e){return r.resolve(this.base,e)},s.prototype.makeChild=function(e,t){var n=void 0===t?this.propertyPath:this.propertyPath+c(t),a=r.resolve(this.base,e.id||""),i=new s(e,this.options,n,a,Object.create(this.schemas));return e.id&&!i.schemas[a]&&(i.schemas[a]=e),i};var u=n.FORMAT_REGEXPS={"date-time":/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])[tT ](2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])(\.\d+)?([zZ]|[+-]([0-5][0-9]):(60|[0-5][0-9]))$/,date:/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])$/,time:/^(2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])$/,email:/^(?:[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+\.)*[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!\.)){0,61}[a-zA-Z0-9]?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\[(?:(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\.){3}(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\]))$/,"ip-address":/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,ipv6:/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,uri:/^[a-zA-Z][a-zA-Z0-9+-.]*:[^\s]*$/,color:/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/,hostname:/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,"host-name":/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,alpha:/^[a-zA-Z]+$/,alphanumeric:/^[a-zA-Z0-9]+$/,"utc-millisec":function(e){return"string"==typeof e&&parseFloat(e)===parseInt(e,10)&&!isNaN(e)},regex:function(e){var t=!0;try{new RegExp(e)}catch(e){t=!1}return t},style:/\s*(.+?):\s*([^;]+);?/g,phone:/^\+(?:[0-9] ?){6,14}[0-9]$/};u.regexp=u.regex,u.pattern=u.regex,u.ipv4=u["ip-address"],n.isFormat=function(e,t,n){if("string"==typeof e&&void 0!==u[t]){if(u[t]instanceof RegExp)return u[t].test(e);if("function"==typeof u[t])return u[t](e)}else if(n&&n.customFormats&&"function"==typeof n.customFormats[t])return n.customFormats[t](e);return!0};var c=n.makeSuffix=function(e){return e=e.toString(),e.match(/[.\s\[\]]/)||e.match(/^[\d]/)?e.match(/^\d+$/)?"["+e+"]":"["+JSON.stringify(e)+"]":"."+e};n.deepCompareStrict=function e(t,n){if(typeof t!=typeof n)return!1;if(t instanceof Array)return n instanceof Array&&(t.length===n.length&&t.every(function(r,a){return e(t[a],n[a])}));if("object"==typeof t){if(!t||!n)return t===n;var r=Object.keys(t),a=Object.keys(n);return r.length===a.length&&r.every(function(r){return e(t[r],n[r])})}return t===n},t.exports.deepMerge=function e(t,n){var r=Array.isArray(n),a=r&&[]||{};return r?(t=t||[],a=a.concat(t),n.forEach(function(n,r){"object"==typeof n?a[r]=e(t[r],n):t.indexOf(n)===-1&&a.push(n)})):(t&&"object"==typeof t&&Object.keys(t).forEach(function(e){a[e]=t[e]}),Object.keys(n).forEach(function(r){"object"==typeof n[r]&&n[r]&&t[r]?a[r]=e(t[r],n[r]):a[r]=n[r]})),a},n.objectGetPath=function(e,t){for(var n,r=t.split("/").slice(1);"string"==typeof(n=r.shift());){var a=decodeURIComponent(n.replace(/~0/,"~").replace(/~1/g,"/"));if(!(a in e))return;e=e[a]}return e},n.encodePath=function(e){return e.map(function(e){return"/"+encodeURIComponent(e).replace(/~/g,"%7E")}).join("")}},{url:9}],3:[function(e,t,n){"use strict";var r=t.exports.Validator=e("./validator");t.exports.ValidatorResult=e("./helpers").ValidatorResult,t.exports.ValidationError=e("./helpers").ValidationError,t.exports.SchemaError=e("./helpers").SchemaError,t.exports.validate=function(e,t,n){var a=new r;return a.validate(e,t,n)}},{"./helpers":2,"./validator":4}],4:[function(e,t,n){"use strict";var r=e("url"),a=e("./attribute"),i=e("./helpers"),o=i.ValidatorResult,s=i.SchemaError,u=i.SchemaContext,c=function e(){this.customFormats=Object.create(e.prototype.customFormats),this.schemas={},this.unresolvedRefs=[],this.types=Object.create(h),this.attributes=Object.create(a.validators)};c.prototype.customFormats={},c.prototype.schemas=null,c.prototype.types=null,c.prototype.attributes=null,c.prototype.unresolvedRefs=null,c.prototype.addSchema=function(e,t){if(!e)return null;var n=t||e.id;return this.addSubSchema(n,e),n&&(this.schemas[n]=e),this.schemas[n]},c.prototype.addSubSchema=function(e,t){if(t&&"object"==typeof t){if(t.$ref){var n=r.resolve(e,t.$ref);return void(void 0===this.schemas[n]&&(this.schemas[n]=null,this.unresolvedRefs.push(n)))}var a=t.id&&r.resolve(e,t.id),o=a||e;if(a){if(this.schemas[a]){if(!i.deepCompareStrict(this.schemas[a],t))throw new Error("Schema <"+t+"> already exists with different definition");return this.schemas[a]}this.schemas[a]=t;var s=a.replace(/^([^#]*)#$/,"$1");this.schemas[s]=t}return this.addSubSchemaArray(o,t.items instanceof Array?t.items:[t.items]),this.addSubSchemaArray(o,t.extends instanceof Array?t.extends:[t.extends]),this.addSubSchema(o,t.additionalItems),this.addSubSchemaObject(o,t.properties),this.addSubSchema(o,t.additionalProperties),this.addSubSchemaObject(o,t.definitions),this.addSubSchemaObject(o,t.patternProperties),this.addSubSchemaObject(o,t.dependencies),this.addSubSchemaArray(o,t.disallow),this.addSubSchemaArray(o,t.allOf),this.addSubSchemaArray(o,t.anyOf),this.addSubSchemaArray(o,t.oneOf),this.addSubSchema(o,t.not),this.schemas[a]}},c.prototype.addSubSchemaArray=function(e,t){if(t instanceof Array)for(var n=0;n<t.length;n++)this.addSubSchema(e,t[n])},c.prototype.addSubSchemaObject=function(e,t){if(t&&"object"==typeof t)for(var n in t)this.addSubSchema(e,t[n])},c.prototype.setSchemas=function(e){this.schemas=e},c.prototype.getSchema=function(e){return this.schemas[e]},c.prototype.validate=function(e,t,n,a){n||(n={});var i=n.propertyName||"instance",o=r.resolve(n.base||"/",t.id||"");if(a||(a=new u(t,n,i,o,Object.create(this.schemas)),a.schemas[o]||(a.schemas[o]=t)),t){var c=this.validateSchema(e,t,n,a);if(!c)throw new Error("Result undefined");return c}throw new s("no schema specified",t)},c.prototype.validateSchema=function(e,t,n,r){function c(e){var t="string"==typeof e?e:e.$ref;return"string"==typeof t&&t}function h(e,t){var n;return(n=c(e))?d.resolve(e,n,t).subschema:e}var d=this,l=new o(e,t,n,r);if(!t)throw new Error("schema is undefined");t.extends&&(t.extends instanceof Array?t.extends.forEach(function(e){t=i.deepMerge(t,h(e,r))}):t=i.deepMerge(t,h(t.extends,r)));var f;if(f=c(t)){var p=this.resolve(t,f,r),m=new u(p.subschema,n,r.propertyPath,p.switchSchema,r.schemas);return this.validateSchema(e,p.subschema,n,m)}var v=n&&n.skipAttributes||[];for(var g in t)if(!a.ignoreProperties[g]&&v.indexOf(g)<0){var b=null,y=d.attributes[g];if(y)b=y.call(d,e,t,n,r);else if(n.allowUnknownAttributes===!1)throw new s("Unsupported attribute: "+g,t);b&&l.importErrors(b)}if("function"==typeof n.rewrite){var w=n.rewrite.call(this,e,t,n,r);l.instance=w}return l},c.prototype.resolve=function(e,t,n){if(t=n.resolve(t),n.schemas[t])return{subschema:n.schemas[t],switchSchema:t};var a=r.parse(t),o=a&&a.hash,u=o&&o.length&&t.substr(0,t.length-o.length);if(!u||!n.schemas[u])throw new s("no such schema <"+t+">",e);var c=i.objectGetPath(n.schemas[u],o.substr(1));if(void 0===c)throw new s("no such schema "+o+" located in <"+u+">",e);return{subschema:c,switchSchema:t}},c.prototype.testType=function(e,t,n,r,a){if("function"==typeof this.types[a])return this.types[a].call(this,e);if(a&&"object"==typeof a){var i=this.validateSchema(e,a,n,r);return void 0===i||!(i&&i.errors.length)}return!0};var h=c.prototype.types={};h.string=function(e){return"string"==typeof e},h.number=function(e){return"number"==typeof e&&isFinite(e)},h.integer=function(e){return"number"==typeof e&&e%1===0},h.boolean=function(e){return"boolean"==typeof e},h.array=function(e){return e instanceof Array},h.null=function(e){return null===e},h.date=function(e){return e instanceof Date},h.any=function(e){return!0},h.object=function(e){return e&&"object"==typeof e&&!(e instanceof Array)&&!(e instanceof Date)},t.exports=c},{"./attribute":1,"./helpers":2,url:9}],5:[function(e,t,n){(function(e){!function(r){function a(e){throw new RangeError(k[e])}function i(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function o(e,t){var n=e.split("@"),r="";n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(I,".");var a=e.split("."),o=i(a,t).join(".");return r+o}function s(e){for(var t,n,r=[],a=0,i=e.length;a<i;)t=e.charCodeAt(a++),t>=55296&&t<=56319&&a<i?(n=e.charCodeAt(a++),56320==(64512&n)?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),a--)):r.push(t);return r}function u(e){return i(e,function(e){var t="";return e>65535&&(e-=65536,t+=N(e>>>10&1023|55296),e=56320|1023&e),t+=N(e)}).join("")}function c(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:x}function h(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function d(e,t,n){var r=0;for(e=n?L(e/_):e>>1,e+=L(e/t);e>J*A>>1;r+=x)e=L(e/J);return L(r+(J+1)*e/(e+C))}function l(e){var t,n,r,i,o,s,h,l,f,p,m=[],v=e.length,g=0,b=P,y=j;for(n=e.lastIndexOf(O),n<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&a("not-basic"),m.push(e.charCodeAt(r));for(i=n>0?n+1:0;i<v;){for(o=g,s=1,h=x;i>=v&&a("invalid-input"),l=c(e.charCodeAt(i++)),(l>=x||l>L((E-g)/s))&&a("overflow"),g+=l*s,f=h<=y?S:h>=y+A?A:h-y,!(l<f);h+=x)p=x-f,s>L(E/p)&&a("overflow"),s*=p;t=m.length+1,y=d(g-o,t,0==o),L(g/t)>E-b&&a("overflow"),b+=L(g/t),g%=t,m.splice(g++,0,b)}return u(m)}function f(e){var t,n,r,i,o,u,c,l,f,p,m,v,g,b,y,w=[];for(e=s(e),v=e.length,t=P,n=0,o=j,u=0;u<v;++u)m=e[u],m<128&&w.push(N(m));for(r=i=w.length,i&&w.push(O);r<v;){for(c=E,u=0;u<v;++u)m=e[u],m>=t&&m<c&&(c=m);for(g=r+1,c-t>L((E-n)/g)&&a("overflow"),n+=(c-t)*g,t=c,u=0;u<v;++u)if(m=e[u],m<t&&++n>E&&a("overflow"),m==t){for(l=n,f=x;p=f<=o?S:f>=o+A?A:f-o,!(l<p);f+=x)y=l-p,b=x-p,w.push(N(h(p+y%b,0))),l=L(y/b);w.push(N(h(l,0))),o=d(n,g,r==i),n=0,++r}++n,++t}return w.join("")}function p(e){return o(e,function(e){return T.test(e)?l(e.slice(4).toLowerCase()):e})}function m(e){return o(e,function(e){return D.test(e)?"xn--"+f(e):e})}var v="object"==typeof n&&n&&!n.nodeType&&n,g="object"==typeof t&&t&&!t.nodeType&&t,b="object"==typeof e&&e;b.global!==b&&b.window!==b&&b.self!==b||(r=b);var y,w,E=2147483647,x=36,S=1,A=26,C=38,_=700,j=72,P=128,O="-",T=/^xn--/,D=/[^\x20-\x7E]/,I=/[\x2E\u3002\uFF0E\uFF61]/g,k={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},J=x-S,L=Math.floor,N=String.fromCharCode;if(y={version:"1.4.1",ucs2:{decode:s,encode:u},decode:l,encode:f,toASCII:m,toUnicode:p},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return y});else if(v&&g)if(t.exports==v)g.exports=y;else for(w in y)y.hasOwnProperty(w)&&(v[w]=y[w]);else r.punycode=y}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,n,i){t=t||"&",n=n||"=";var o={};if("string"!=typeof e||0===e.length)return o;var s=/\+/g;e=e.split(t);var u=1e3;i&&"number"==typeof i.maxKeys&&(u=i.maxKeys);var c=e.length;u>0&&c>u&&(c=u);for(var h=0;h<c;++h){var d,l,f,p,m=e[h].replace(s,"%20"),v=m.indexOf(n);v>=0?(d=m.substr(0,v),l=m.substr(v+1)):(d=m,l=""),f=decodeURIComponent(d),p=decodeURIComponent(l),r(o,f)?a(o[f])?o[f].push(p):o[f]=[o[f],p]:o[f]=p}return o};var a=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],7:[function(e,t,n){"use strict";function r(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var a=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,n,s){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?r(o(e),function(o){var s=encodeURIComponent(a(o))+n;return i(e[o])?r(e[o],function(e){return s+encodeURIComponent(a(e))}).join(t):s+encodeURIComponent(a(e[o]))}).join(t):s?encodeURIComponent(a(s))+n+encodeURIComponent(a(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},{}],8:[function(e,t,n){"use strict";n.decode=n.parse=e("./decode"),n.encode=n.stringify=e("./encode")},{"./decode":6,"./encode":7}],9:[function(e,t,n){"use strict";function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function a(e,t,n){if(e&&c.isObject(e)&&e instanceof r)return e;var a=new r;return a.parse(e,t,n),a}function i(e){return c.isString(e)&&(e=a(e)),e instanceof r?e.format():r.prototype.format.call(e)}function o(e,t){return a(e,!1,!0).resolve(t)}function s(e,t){return e?a(e,!1,!0).resolveObject(t):t}var u=e("punycode"),c=e("./util");n.parse=a,n.resolve=o,n.resolveObject=s,n.format=i,n.Url=r;var h=/^([a-z0-9.+-]+:)/i,d=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,f=["<",">",'"',"`"," ","\r","\n","\t"],p=["{","}","|","\\","^","`"].concat(f),m=["'"].concat(p),v=["%","/","?",";","#"].concat(m),g=["/","?","#"],b=255,y=/^[+a-z0-9A-Z_-]{0,63}$/,w=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,E={javascript:!0,"javascript:":!0},x={javascript:!0,"javascript:":!0},S={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},A=e("querystring");r.prototype.parse=function(e,t,n){if(!c.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var r=e.indexOf("?"),a=r!==-1&&r<e.indexOf("#")?"?":"#",i=e.split(a),o=/\\/g;i[0]=i[0].replace(o,"/"),e=i.join(a);var s=e;if(s=s.trim(),!n&&1===e.split("#").length){var d=l.exec(s);if(d)return this.path=s,this.href=s,this.pathname=d[1],d[2]?(this.search=d[2],t?this.query=A.parse(this.search.substr(1)):this.query=this.search.substr(1)):t&&(this.search="",this.query={}),this}var f=h.exec(s);if(f){f=f[0];var p=f.toLowerCase();this.protocol=p,s=s.substr(f.length)}if(n||f||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var C="//"===s.substr(0,2);!C||f&&x[f]||(s=s.substr(2),this.slashes=!0)}if(!x[f]&&(C||f&&!S[f])){for(var _=-1,j=0;j<g.length;j++){var P=s.indexOf(g[j]);P!==-1&&(_===-1||P<_)&&(_=P)}var O,T;T=_===-1?s.lastIndexOf("@"):s.lastIndexOf("@",_),T!==-1&&(O=s.slice(0,T),s=s.slice(T+1),this.auth=decodeURIComponent(O)),_=-1;for(var j=0;j<v.length;j++){var P=s.indexOf(v[j]);P!==-1&&(_===-1||P<_)&&(_=P)}_===-1&&(_=s.length),this.host=s.slice(0,_),s=s.slice(_),this.parseHost(),this.hostname=this.hostname||"";var D="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!D)for(var I=this.hostname.split(/\./),j=0,k=I.length;j<k;j++){var J=I[j];if(J&&!J.match(y)){for(var L="",N=0,F=J.length;N<F;N++)L+=J.charCodeAt(N)>127?"x":J[N];if(!L.match(y)){var U=I.slice(0,j),M=I.slice(j+1),R=J.match(w);R&&(U.push(R[1]),M.unshift(R[2])),M.length&&(s="/"+M.join(".")+s),this.hostname=U.join(".");break}}}this.hostname.length>b?this.hostname="":this.hostname=this.hostname.toLowerCase(),D||(this.hostname=u.toASCII(this.hostname));var q=this.port?":"+this.port:"",B=this.hostname||"";this.host=B+q,this.href+=this.host,D&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!E[p])for(var j=0,k=m.length;j<k;j++){var H=m[j];if(s.indexOf(H)!==-1){var z=encodeURIComponent(H);z===H&&(z=escape(H)),s=s.split(H).join(z)}}var $=s.indexOf("#");$!==-1&&(this.hash=s.substr($),s=s.slice(0,$));var W=s.indexOf("?");if(W!==-1?(this.search=s.substr(W),this.query=s.substr(W+1),t&&(this.query=A.parse(this.query)),s=s.slice(0,W)):t&&(this.search="",this.query={}),s&&(this.pathname=s),S[p]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var q=this.pathname||"",K=this.search||"";this.path=q+K}return this.href=this.format(),this},r.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",a=!1,i="";this.host?a=e+this.host:this.hostname&&(a=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(a+=":"+this.port)),this.query&&c.isObject(this.query)&&Object.keys(this.query).length&&(i=A.stringify(this.query));var o=this.search||i&&"?"+i||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||S[t])&&a!==!1?(a="//"+(a||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):a||(a=""),r&&"#"!==r.charAt(0)&&(r="#"+r),o&&"?"!==o.charAt(0)&&(o="?"+o),n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),o=o.replace("#","%23"),t+a+n+o+r},r.prototype.resolve=function(e){return this.resolveObject(a(e,!1,!0)).format()},r.prototype.resolveObject=function(e){if(c.isString(e)){var t=new r;t.parse(e,!1,!0),e=t}for(var n=new r,a=Object.keys(this),i=0;i<a.length;i++){var o=a[i];n[o]=this[o]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var s=Object.keys(e),u=0;u<s.length;u++){var h=s[u];"protocol"!==h&&(n[h]=e[h])}return S[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!S[e.protocol]){for(var d=Object.keys(e),l=0;l<d.length;l++){var f=d[l];n[f]=e[f]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||x[e.protocol])n.pathname=e.pathname;else{for(var p=(e.pathname||"").split("/");p.length&&!(e.host=p.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),n.pathname=p.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var m=n.pathname||"",v=n.search||"";n.path=m+v}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var g=n.pathname&&"/"===n.pathname.charAt(0),b=e.host||e.pathname&&"/"===e.pathname.charAt(0),y=b||g||n.host&&e.pathname,w=y,E=n.pathname&&n.pathname.split("/")||[],p=e.pathname&&e.pathname.split("/")||[],A=n.protocol&&!S[n.protocol];if(A&&(n.hostname="",n.port=null,n.host&&(""===E[0]?E[0]=n.host:E.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===p[0]?p[0]=e.host:p.unshift(e.host)),e.host=null),y=y&&(""===p[0]||""===E[0])),b)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,E=p;else if(p.length)E||(E=[]),E.pop(),E=E.concat(p),n.search=e.search,n.query=e.query;else if(!c.isNullOrUndefined(e.search)){if(A){n.hostname=n.host=E.shift();var C=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");C&&(n.auth=C.shift(),n.host=n.hostname=C.shift())}return n.search=e.search,n.query=e.query,c.isNull(n.pathname)&&c.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!E.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var _=E.slice(-1)[0],j=(n.host||e.host||E.length>1)&&("."===_||".."===_)||""===_,P=0,O=E.length;O>=0;O--)_=E[O],"."===_?E.splice(O,1):".."===_?(E.splice(O,1),P++):P&&(E.splice(O,1),P--);if(!y&&!w)for(;P--;P)E.unshift("..");!y||""===E[0]||E[0]&&"/"===E[0].charAt(0)||E.unshift(""),j&&"/"!==E.join("/").substr(-1)&&E.push("");var T=""===E[0]||E[0]&&"/"===E[0].charAt(0);if(A){n.hostname=n.host=T?"":E.length?E.shift():"";var C=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");C&&(n.auth=C.shift(),n.host=n.hostname=C.shift())}return y=y||n.host&&E.length,y&&!T&&E.unshift(""),E.length?n.pathname=E.join("/"):(n.pathname=null,n.path=null),c.isNull(n.pathname)&&c.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),
n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var e=this.host,t=d.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{"./util":10,punycode:5,querystring:8}],10:[function(e,t,n){"use strict";t.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},{}],11:[function(e,t,n){t.exports={name:"jet-api",version:"2.1.17",scripts:{lint:"jshint src","build:dev":"node ./buildScripts/dev.js","build:production":"node ./buildScripts/production.js",build:"npm run build:dev && npm run build:production",test:"nyc --reporter=html jasmine JASMINE_CONFIG_PATH=spec/support/jasmine.json","test:debug":"node %NODE_DEBUG_OPTION% node_modules/jasmine/bin/jasmine JASMINE_CONFIG_PATH=spec/support/jasmine.json","test:watch":"npm test -- -watch","test:bundle":"browserify spec/spec/specs.js -o spec/browser/test.bundle.js -t [ babelify --presets [ es2015 ] ]"},main:"src/main.js",repository:{type:"git",url:"https://github.com/thomsonreuters/jet-api.git"},bugs:{url:"https://github.com/thomsonreuters/jet-api/issues"},homepage:"https://github.com/thomsonreuters/jet-api#readme",dependencies:{jsonschema:"^1.0.2","prepend-file-cli":"^1.0.2"},devDependencies:{browserify:"^13.0.0",chalk:"^1.1.3","cross-env":"3.1.1",exorcist:"^0.4.0","file-system":"^2.2.1",ghooks:"1.3.2",istanbul:"0.4.5",jasmine:"2.5.2","jasmine-jquery":"2.1.1",jquery:"3.1.1",jsdom:"9.6.0",jshint:"*",nyc:"8.3.0",sinon:"1.17.6","uglify-js":"^2.6.1","uglify-stream":"^1.1.0"},config:{ghooks:{"pre-commit":"npm t"}},babel:{presets:["es2015"],env:{test:{plugins:["istanbul"]}}},nyc:{exclude:["node_modules","spec/setup.js","spec/babel_spec_runner.js","spec/mocks/**/*.js","spec/spec/**/*spec.js"],sourceMap:!1,instrument:!0}}},{}],12:[function(e,t,n){function r(e){var t={};if(e){var n=e;for("IMG"==n.nodeName&&(t.imgUrl=n.src);n;){if("A"===n.nodeName){t.aUrl=n.href;break}var r=n.parentNode;if(!r||n==r||r.documentElement)break;n=r}}return t}function a(e){var t=null;return e||(e=window.event),e?(e.target?t=e.target:e.srcElement&&(t=e.srcElement),3==t.nodeType&&(t=t.parentNode),t):null}function i(e){Array.isArray(e)&&e.forEach(function(t,n){if(t.type&&!t.item){t.item=t.type,t.type=void 0;try{delete t.type}catch(e){}}if("Header"===t.item&&t.caption&&e[n+1]&&(e[n+1].beginGroup=!0,e[n+1].groupName=t.caption),t.captionType){t.type=t.captionType,t.captionType=void 0;try{delete t.captionType}catch(e){}}t.items&&i(t.items)})}function o(e){if(e)return e.commandBars&&Array.isArray(e.commandBars)&&(e=e.commandBars),Array.isArray(e)&&e.forEach(function(e){e.items&&i(e.items)}),e}function s(e){g.debug("JET.updateCommandBars called. Data: ",e),e.commandBars=o(e.commandBars),b.processEvent({name:"onUpdateCommandBars",data:e})}function u(e){var t=x[e.id];t&&("string"==typeof t&&(t=p.eval(t)),t.call(window,null!=e.value?e.value:e))}function c(e){if(e.item)switch(e.item){case"SplitButton":case"Menu":if(e.items)for(var t=e.items.length,n=0;n<t;n++)c(e.items[n]);return;case"Print":return void(e.handler&&S("PRINT",e.handler))}"undefined"!=typeof e.id&&e.handler&&S(e.id,e.handler)}function h(e){if(e)for(var t=e.length,n=0;n<t;n++){var r=e[n];if(r.items)for(var a=r.items.length,i=0;i<a;i++)c(r.items[i])}}function d(e){switch(e.name){case"onContextMenu":e.data.menu&&h(e.data.menu);break;case"onToast":c(e.data);break;case"onLoad":e.data.toolbar&&h(e.data.toolbar),e.data.serviceMenu&&h(e.data.serviceMenu),e.data.apptitlebar&&h(e.data.apptitlebar),e.data.appmenu&&h(e.data.appmenu);break;case"onUpdateCommandBars":e.data.commandBars&&h(e.data.commandBars)}return e}function l(e,t){return 0!==(e&t)}function f(e){var t=e.NavigationSupport.value;"string"!=typeof t&&(l(t,C.NavigationSupport.CanPublishContext)||l(t,C.NavigationSupport.CanReceiveContext)||(t|=128),e.NavigationSupport.value=t.toString())}var p=e("./Util"),m=e("./shared/mixin"),v=e("./JETCore"),g=e("./UtilLogger"),b=e("./router"),y=e("./shared/mergeprops"),w={};if(b._peoverride)b.processEvent(msg);else{var E=b.processEvent.bind(b);b.processEvent=function(e){d(e),E(e)},b._peoverride=!0}var x={},S=function(e,t){x[e]=t};v.onLoad(function(){b.addEventHandler("onCommand",u,!0)});var A=["onSendObject","onPropertyChange","onCommand","onDragEnter","onDragOver","onDragLeave","onDrop","onPaste","onActivate","onDeactivate"];p.addHandlers(A,v);var C={updateAppMenu:function(e){if(e){var t={commandBarType:"AppMenu",commandBars:e};s(t)}},contextChange:function(e){b.processEvent({name:"onContextChange",data:e})},getProperty:function(e){return w[e]},setProperties:function(e){w=y(w,e),b.processEvent({name:"onPropertyChange",data:w})},NavigationSupport:{ShowRelatedTradeInToolbar:1,ShowRelatedTradeOnRightClick:2,CanPublishContext:32,CanReceiveContext:64},contextMenu:function(e){var t=r(a());if(m(e,t),g.debug("JET.contextMenu called. Data: ",e),e.menu&&(e.menu=o(e.menu)),e.mouse&&e.mouse.type){var n=e.mouse;delete e.mouse,e.mouse={screenX:n.screenX,screenY:n.screenY,clientX:n.clientX,clientY:n.clientY}}b.processEvent({name:"onContextMenu",data:e}),p.stopBubbling()},copyToClipboard:function(e){g.debug("JET.copyToClipboard called. Data: ",e),b.processEvent({name:"onCopyToClipboard",data:e})},toast:function(e){b.processEvent({name:"onToast",data:e})},screenshot:function(){g.debug("JET.screenshot called."),v.navigate({url:"lac://TR.Screenshot.PROGID",name:"Eikon Library Object"}),p.stopBubbling()},sendByMail:function(e){g.debug("JET.sendByMail called."),b.processEvent({name:"onSendByMail",data:e})}};m(v,C);var _={getComponentDescription:function(){var e={properties:p.properties(),entities:v.Context||[]};return f(e.properties),p.commandline()&&(e.toolbar={commandBars:[{items:[{item:"Search"}]}]}),p.apptitlebar()&&(e.apptitlebar=o(p.apptitlebar())),p.appmenu()&&(e.appmenu=o(p.appmenu())),e}};m(p,_)},{"./JETCore":17,"./Util":25,"./UtilLogger":26,"./router":23,"./shared/mergeprops":35,"./shared/mixin":36}],13:[function(e,t,n){function r(){m.persistdata=p,u.Archive.save()}function a(e,t){return e.replace(/^(?:[^:\/\\?#]+:(?=\/\/))?(?:\/\/)?(?:[^:\/\\?#]*(?::[^\/\\?#]*)?)?/,"cpurl://"+t)}function i(){u.Archive=u.Archive||[];for(var e=Object.keys(v),t=e.length,n=0;n<t;n++){var r=e[n];u.Archive[r]=v[r]}}function o(e){var t;if(h.debug("Received archive data: ",e),e&&e.data&&(t=Array.isArray(e.data)?e.data:e.data.data),t){f=!0,u.Archive=[];for(var n=0;n<t.length;++n){var r=t[n];if("_archiveHash"===r.name)try{p=JSON.parse(r.value)}catch(e){h.debug("Received bad _archiveHash data: ",r.value)}else u.Archive.push({name:r.name,value:r.value})}}}function s(){var e,t=new Promise(function(t,n){e={resolve:t}}),n=u.PersistURL,r={data:[]};if(null!==n&&(r.url=n),u.SAP&&(r.cpurl=a(n,JET.SAP)),u.Archive){r.data=[];for(var i=0;i<u.Archive.length;++i)r.data.push({name:u.Archive[i].name,value:u.Archive[i].value});null!=p&&r.data.push({name:"_archiveHash",value:JSON.stringify(p)})}return null!=u.Context&&u.Context.length>0?c.toContainerAsync("ContextData",JET.Context).then(function(t){r.data.push({name:"context",value:t}),m.persistdata=r,e.resolve(r)}):(m.persistdata=r,e.resolve(r)),t}var u=e("./JETCore"),c=e("./router"),h=e("./UtilLogger"),d=e("./Util"),l=e("./shared/mixin"),f=!1,p={},m=e("./shared/boundObjects"),v={put:function(e,t){return p[e]!==t&&(p[e]=t,r(),!0)},get:function(e,t){return p[e]?p[e]:t},clear:function(){p={},r()},getAllKeys:function(){return Object.keys(p)},save:function(){s().then(function(e){c.processEvent({name:"persistdata",data:e})})}};l(d,{onPersistData:function(e){return o(e),i(),f},getArchiveData:function(){return s()}})},{"./JETCore":17,"./Util":25,"./UtilLogger":26,"./router":23,"./shared/boundObjects":30,"./shared/mixin":36}],14:[function(e,t,n){function r(e){var t=e.screenX,n=e.screenY;return{clientX:e.clientX,clientY:e.clientY,screenX:t,screenY:n,eventData:t+","+n,srcEvent:e}}function a(e,t){var n=r(t);e&&D==_&&(u(),m(n)),e?v(n):f(n),T=null,D=C}function i(){var e=S;return S++,e}function o(e,t,n){E.getContainerData({name:"getDropData",xmlData:n.eventData}).then(function(n){"undefined"!=typeof n&&null!=n?e(n):t("null or undefined received")})}function s(e,t){l({name:"onDragOver",data:{x:t.clientX,y:t.clientY,e:t.srcEvent,dropData:e}})}function u(e){l({name:"onDragLeave",data:null})}function c(e){l({name:"onContextChange",data:e})}function h(e,t){e.mouse=t,l({name:"onDrop",data:e}),c(e)}function d(e,t){e.mouse=t,l({name:"onDragEnter",data:e})}function l(e){E.callEventHandler(e)}function f(){null!=window.externalHost&&E.getContainerData({name:"resetDragDrop",xmlData:null,async:function(){}})}function p(e){null!=window.externalHost&&E.getContainerData({name:"windowDragEnter",xmlData:e.eventData,async:function(){}})}function m(e){null!=window.externalHost&&E.getContainerData({name:"windowDragLeave",xmlData:e.eventData,async:function(){}})}function v(e){null!=window.externalHost&&E.getContainerData({name:"cancelDragDrop",xmlData:e.eventData,async:function(){}})}function g(e,t,n){return!!JET.ContainerDescription&&(!(JET.ContainerDescription.major<e)&&(JET.ContainerDescription.major>e||!(JET.ContainerDescription.minor<t)&&(JET.ContainerDescription.minor>t||!(JET.ContainerDescription.build<n)&&(JET.ContainerDescription.build>n,!0))))}var b=e("./Util"),y=e("./JETCore"),w=e("./UtilLogger"),E=e("./router"),x=e("./shared/mixin"),S=0,A=0,C="noDragStarted",_="dataAvailable",j="noValidDragData",P="pending",O="getDropDataFailed",T=null,D=C,I="copy",k={setDropData:function(e){T=e,D=_}};try{window.top.setDragData=function(e){E.getFromContainer("fromTransferData",e).then(function(e){T=e.data,D=_})}}catch(e){w.warn("setDragData cannot access top frame.")}b.addEvent(document,"dragstart",function(e){D!==_&&(D=j)}),b.addEvent(document,"dragenter",function(e){if(D===C){D=P;var t=i(),n=t,a=r(e);null!==window.externalHost&&o(function(e){D===P&&n===t&&(k.setDropData(e),D=_,d(e,a))},function(e){w.error("Error getting drop data: "+e),D=O},r(e))}else D===_&&0===A&&d(T,r(e));0===A&&p(r(e)),A++,D===_&&(e.dataTransfer||e.fakeDataTransfer)?(e.dataTransfer||e.fakeDataTransfer).dropEffect=I:(e.dataTransfer||e.fakeDataTransfer)&&((e.dataTransfer||e.fakeDataTransfer).dropEffect="none"),e.preventDefault()}),b.addEvent(document,"dragleave",function(e){A--,0===A&&a(!0,e),e.preventDefault()}),b.addEvent(document,"drop",function(e){A=0,D===_&&h(T,r(e)),a(!1,e),e.preventDefault()}),b.addEvent(document,"dragover",function(e){D===_?((e.dataTransfer||e.fakeDataTransfer)&&((e.dataTransfer||e.fakeDataTransfer).dropEffect=I),s(T,r(e))):(e.dataTransfer||e.fakeDataTransfer).dropEffect="none",e.preventDefault()});var J={dragStart:function(e){if(k&&k.setDropData(e),g(9,0,38e3)){if(null!=e)return E.processEvent({name:"onDragStart",data:e}),b.stopBubbling(),!0}else{var t=null;if(e.entities&&e.entities.length&&(t=e.entities),null!=t)return E.processEvent({name:"onContextDragStart",data:t}),b.stopBubbling(),!0}return!1}};x(y,J)},{"./JETCore":17,"./Util":25,"./UtilLogger":26,"./router":23,"./shared/mixin":36}],15:[function(e,t,n){var r,a=e("./router"),i=e("./JETCore"),o=e("./shared/mixin"),s=e("./UtilLogger"),u=["debug","information","warning","high","critical"];r=i.ID||"",u.forEach(function(e){i[e]=function(t){i.log({messages:[{severity:e,text:t,source:r}]})}});var c={log:function(e){s.debug("JET.log called. Data: ",e),a.processEvent({name:"onLog",data:e})},loggingOptions:function(e,t){s.setLogOptions(e)},loggingSource:function(e){r=e}};o(i,c)},{"./JETCore":17,"./UtilLogger":26,"./router":23,"./shared/mixin":36}],16:[function(e,t,n){function r(e){return"string"==typeof e||e instanceof String}function a(e){return u.getContainerData({name:e,xmlData:""})}function i(e){return s(function(){return a(e)},function(e){return e})}function o(e){if(!(void 0===e||void 0===e.length||e.length<=0)){if(1===e.length&&r(e[0].RIC))return e[0];var t;for(var n in e){var a=e[n];if(r(a.RIC)&&(void 0===t&&(t=a),a.hasOwnProperty("NavigationNS")))return a}return t}}var s=e("./shared/deferred"),u=e("./router"),c=e("./UtilLogger"),h=e("./shared/mixin"),d=e("./JETCore"),l={getProperties:function(){return c.debug("JET.getProperties called."),i("description")},getSavedState:function(){return c.debug("JET.getSavedState called."),i("persistdata")},getPasteData:function(){return c.debug("JET.getPasteData called."),i("getPasteData")},isActive:function(){return c.debug("JET.isActive called."),i("isActive")},hasFocus:function(){return c.debug("JET.hasFocus called."),i("hasFocus")},getActiveSymbol:function(){return c.debug("JET.getActiveSymbol called."),s(this.getActiveContext,o,function(e){console.log("could not retrieve ActiveSymbol")})},getActiveContext:function(){return c.debug("JET.getActiveContext called."),i("ActiveSymbol")},getClipboardData:function(){return c.debug("JET.getClipboardData called."),i("ClipboardData")}};h(d,l)},{"./JETCore":17,"./UtilLogger":26,"./router":23,"./shared/deferred":33,"./shared/mixin":36}],17:[function(e,t,n){function r(e){if(b.setLogLevel(e.LogLevel),e.required&&!d.Plugins.loaded(e.required)&&!d.Plugins.loaded())return b.info("required plugins loading..."),void setTimeout(function(){d.init(e)},10);w.init(e),g(d,e),d.LoadFailed=!1;var t=null;A&&S&&(t=top.location.href),d.PersistURL=d.PersistURL||t,m.addEventHandler("Publish",a);var n=m.JETRegisterRequest(e);return n.then(function(e){if(!e.subApp){i(e,d),x.getDataQueue.forEach(function(e){m.getContainerData(e)}),x.processEventQueue.forEach(function(e){m.processEvent(e)}),b.debug("JET successfully registered with container finished"),b.debug("Requesting archive data from container."),T=o(e);var t=y.getComponentDescription(d);b.debug("Sending onLoad. Data:",t),m.processEvent({name:"onLoad",data:t}),s(d),m._setRegisterData(e)}},function(e){D='Could not register JET. Error: "'+e+'"',console.log(D),u(d,D)})}function a(e){var t=m.callSubscriptions(e,[e.data,e.channel]);return"undefined"!=typeof t&&t}function i(e,t){if(e.containerDescription){var n=e.containerDescription.userAgent;if(void 0!==n){var r=/EIKON([0-9]*)\.([0-9]*)\.([0-9]*),/i.exec(n);r&&4==r.length&&(e.containerDescription.major=parseInt(r[1]),e.containerDescription.minor=parseInt(r[2]),e.containerDescription.build=parseInt(r[3]))}t.ContainerDescription=e.containerDescription}e.ContainerType&&(t.ContainerType=e.ContainerType)}function o(e){return e=e||{persistData:{}},e=e.persistData,y.onPersistData(e)}function s(e){e.Loaded=!0,e.Initialized=!0,e.Context&&e.Context.length&&e.contextChange(e.Context),y.addEvent(window,"unload",e.unload.bind(e)),j.run(window,T),j=C()}function u(e,t){e.Loaded=!1,e.Initialized=!1,e.LoadFailed=!0,P.run(window,t),P=C()}function c(){if("EikonNow"in window&&window.EikonNow.isEnabled()){var e={},t=new Promise(function(t,n){e.resolve=t,e.reject=n});return window.EikonNow.ready(function(){e.resolve()}),t}return!1}function h(e){var t,n=d,c=n.containerType();if("desktop"===c)try{A=!0,t=window.top}catch(e){A=!1,t=window}else t=window;if(!t.__initACS__)throw new Error("JET could not find the container");var h=t.__initACS__;new Promise(function(e,t){h(e,t)}).then(function(t){if(l=new v({sameWindowStrategy:"desktop"!==c}),m.setBus(l),l.registerNamespace(m),t.register)m.ACShandshake().then(function(){r(e)}),_=!0;else{var h=0,d=function(){setTimeout(function(){m.ACSpollForInitData().then(function(e){b.debug("JET loading a sub app.");var t;try{e=e[0],t=e.persistData}catch(n){e={},t=""}i(e,n),T=o(t),m.addEventHandler("Publish",a),s(n)},function(e){h<10?setTimeout(function(){d(),h++},40):(D='Failed to load JET as a sub app. Error: "'+e+'"',b.debug(D),u(n,D))},40)})};d()}})}var d,l,f,p=e("../package.json").version,m=e("./router"),v=e("./MessageManager"),g=e("./shared/mixin"),b=e("./UtilLogger"),y=e("./Util"),w=e("./JETProperties"),E=e("./JETDataProviders"),x=e("./stubs/container"),S=e("./shared/_top"),A=!1,C=e("./shared/callbacksExecutor"),_=!1,j=C(),P=C(),O=C(),T=!1,D="";b.setLogOptions(2),window.JET=function(){var e=E(window.JET);return f={getDataProviders:function(){return e},containerType:function(){var e=window.navigator.userAgent;return e.indexOf("EikonViewer")>-1?"desktop":e.indexOf("Mobile")>-1||e.indexOf("Mobi/")>-1||e.indexOf("Tablet")>-1?"mobile":"web"},extend:function(e,t,n){if(!d[t])try{d[t]=n(y)}catch(e){b.warn("Fail to load plugin: "+t+" due to "+e.toString())}},navigate:function(e){m.processEvent({name:"onNavigate",data:e})},onLoad:function(e,t){var n=t?function(){d.Plugins.loaded(t)?e.call(window,T):d.onPluginLoaded(function(){d.Plugins.loaded(t)&&e.call(window,T)})}:e;d.Loaded?n.call(window,T):j.push(n)},onLoadFailed:function(e){d.LoadFailed?e.call(window,D):P.push(e)},onUnload:function(e){O.push(e)},onContextChange:function(e){m.addEventHandler("onContextChange",e,!0)},unload:function(){if(b.debug("Running onUnloadHandlers"),O.run(),O=C(),j=C(),P=C(),_){b.debug("Unregistering ACS");try{S=A?top:window,S.__unRegisterACS__(),delete S.__initACS__}catch(e){}}l&&(b.debug("Unloading message manager"),l.unload()),m.setBus(void 0),l=void 0,d.Loaded=!1,d.Initialized=!1,d.ContainerDescription=void 0,d.Context=void 0,b.debug("Releasing all event handlers"),y.unsubscribeAll()},init:function(e){e=e||{};var t=c();t?t.then(function(){h(e)}):h(e)}}}(),d=window.JET,d.version=p,t.exports=d},{"../package.json":11,"./JETDataProviders":18,"./JETProperties":20,"./MessageManager":22,"./Util":25,"./UtilLogger":26,"./router":23,"./shared/_top":29,"./shared/callbacksExecutor":32,"./shared/mixin":36,"./stubs/container":38}],18:[function(e,t,n){var r=e("./shared/boundObjects"),a=e("./Util"),i=function(e){return{properties:function(){return r.properties},description:function(){return a.getComponentDescription(e)},persistdata:function(){return a.getArchiveData()},helpurl:function(){return r.helpurl},context:function(){return r.context},inputowner:function(){var t=e.IsInputOwner?"component":"container";return r.inputowner=t,t}}};t.exports=i},{"./Util":25,"./shared/boundObjects":30}],19:[function(e,t,n){var r=e("./util"),a=e("./JETCore"),i=e("./shared/mixin"),o=[],s=[],u=[],c=[],h=[],d=d||{},l={plugin:function(e){var t="function"==typeof e?e(r):{};if(t.name){var n=t.name.toLowerCase();if(o.indexOf(n)!==-1)throw new Error("Tried to a load a plugin with the same name: ",t.name);o.push(n),s=s.filter(function(e){return e.toLowerCase()!==n})}i(r,t.util),i(a,t.api),t.register&&c.push(t.register),t.containerEvents&&r.addHandlers(t.containerEvents,a),h.forEach(function(e){e.call(d,t.name)})},onPluginLoaded:function(e){h.push(e)},Plugins:{loaded:function(e){return e?e.every(function(e){return o.indexOf(e.toLowerCase())>-1}):o},inflight:function(e){return!(!s||s.length<1)&&(!e||s.some(function(e){if(u.indexOf(e)>-1)return!0}))},require:function(e,t,n){if(!n&&e&&u.indexOf(e)===-1&&u.push(e),this.loaded([e])||s.indexOf(e)>-1);else{s.push(e);var r=document.createElement("script");r.setAttribute("src",t),document.querySelector("head").appendChild(r)}}}};i(a,l)},{"./JETCore":17,"./shared/mixin":36,"./util":25}],20:[function(e,t,n){var r=e("./shared/boundObjects"),a=!1,i=null,o=["Title","Summary","HelpURL"],s={init:function(e){var t={};a=e.commandline||!!e.Toolbar,this.commandline=a,this.apptitlebar=e.AppTitleBar||i,this.appmenu=e.AppMenu||{},t.NavigationSupport={value:e.NavigationSupport||"98",type:"xs:string",access:"rw"},o.forEach(function(n){t[n]={value:e[n]||"",type:"xs:string",access:"ro"},e[n]&&delete e[n]}),t.HelpURL&&(r.helpurl=t.HelpURL),e.Context&&(r.context=e.Context),r.properties=t}};t.exports=s},{"./shared/boundObjects":30}],21:[function(e,t,n){var r=e("./JETCore"),a=e("./router"),i=e("./shared/mixin"),o=e("jsonschema"),s=1010,u={send:function(e,t,n){2===arguments.length?a.publishWithPipeTarget(arguments[0],arguments[1]):a.publishWithPipeTarget(t,n,e)},subscription:function(e,t,n){var i=s++ +Date.now();if(2===arguments.length){var o=arguments[0],u=arguments[1];return{id:i,onUpdate:function(e){return a.subscriptionWithPipeTarget({channel:o,context:u,handler:e,pipe:!0}),this}}}var c=r.ContainerDescription.GUID,h=t+"/"+c+":"+i,d=h+"/error";return{id:i,onUpdate:function(r){return a.subscriptionWithPipeTarget({channel:h,data:n,target:e,handler:r,requestSubscribeWithPipe:{channel:t+"/onSubscribe",pipe:!0}}),this},onError:function(t){return a.subscriptionWithPipeTarget({channel:d,data:n,target:e,handler:t}),this},unsubscribe:function(){a.unsubscribeChannel({channel:h}),a.unsubscribeChannel({channel:d});var r={channel:h,target:e,data:n};return a.processEvent({name:"Publish",data:JSON.stringify(r),target:e,channel:t+"/onUnsubscribe",pipe:!0}),this}}},service:function(e){var t=e+"/onRequest",n=e+"/onSubscribe",r=e+"/onUnsubscribe",i=a.subscriptionWithPipeTarget({channel:n}),o=a.subscriptionWithPipeTarget({channel:r}),s=a.subscriptionWithPipeTarget({channel:t}),u={subscriptions:{},onSubscribe:function(e){var t=e,r=this;return e=function(){var e=JSON.parse(arguments[0]);return r.subscriptions[e.channel]=e,t.apply(this,arguments)},a.addSubscriptionHandler({channel:n,handler:e}),u},onRequest:function(e){return a.addSubscriptionHandler({channel:t,handler:e}),u},onUnsubscribe:function(e){return a.addSubscriptionHandler({channel:r,handler:e}),u},unsubscribe:function(){i.unsubscribe(),o.unsubscribe(),s.unsubscribe()}};return u},request:function(e,t,n){var i,o=r.ContainerDescription.GUID,u=s++ +Date.now(),c=t+"/"+o+":"+u,h=c+"/error",d=new Promise(function(e,t){i={resolve:e,reject:t}});a.subscriptionWithPipeTarget({channel:c,data:n,target:e,handler:function(e){a.unsubscribeChannel({channel:c}),a.unsubscribeChannel({channel:h}),i.resolve(e)},requestSubscribeWithPipe:{channel:t+"/onRequest",pipe:!0}}),a.subscriptionWithPipeTarget({channel:h,target:e,handler:function(e){a.unsubscribeChannel({channel:c}),a.unsubscribeChannel({channel:h}),i.reject(e)}});return d},Data:function(e){var t,n=new Promise(function(e,n){t={resolve:e,reject:n}});return r.request("!data","/data-service/info",{name:e}).then(function(n){var a=JSON.parse(n);if(a.error&&t.reject(a.error),a){var i={};a.verbs&&a.verbs.indexOf("request")>-1&&(i.request=function(t){var n=r.validateJSON(t,a.schema);if(n)return r.request("!data","/"+e,t);throw new Error("Invalid request")}),a.verbs&&a.verbs.indexOf("subscribe")>-1&&(i.subscribe=function(t){var n=r.validateJSON(t,a.schema);if(n)return r.subscription("!data","/"+e,t);throw new Error("Invalid request")}),t.resolve(i)}else t.reject("Description object not returned")},function(n){t.reject("couldn't access "+e+" service")}),n},validateJSON:function(e,t){var n=o.Validator,r=new n,a=r.validate(e,t);return!(a.errors&&a.errors.length>0)||(console.log(a.errors),!1)},publish:function(e,t){a.publish(e,t)},subscribe:function(e,t,n){var r={channel:e,handler:t,context:n};return a.subscribe(r)},unsubscribeAll:function(){a.unsubscribeAll()},unsubscribe:function(e){return a.unsubscribeChannel({channel:e})}};i(r,u)},{"./JETCore":17,"./router":23,"./shared/mixin":36,jsonschema:3}],22:[function(e,t,n){function r(e){return!(!e||!e.lastIndexOf||0!==e.lastIndexOf("acs--jet--",0))}function a(e){if(e=e||{},this._promiseIndex=1,this._promises={},this._deferreds={},this._sanitaryFunctions=void 0,this.name=Math.floor(1e3*Math.random())+1+"j_mm",e.sameWindowStrategy){if(this.sameWindowStrategy=!0,window.__JETMessageShim__=this._messageHandlerSameWindow.bind(this),!window.__ACSMessageShim__)throw new Error("Could not find ACSMessageShim.");this.__ACSMessageShim__=window.__ACSMessageShim__,this.sendMessage=function(e,t){t=t||{},this.__ACSMessageShim__(e,t)},this.sendPromise=function(e,t){t=t||{};var n=this._makePromise();return t.promiseIndex=n,this.sendMessage(e,t),this._promises[n]},this.removeListener=function(){}}else this.init(),this.sendMessage=function(e,t){t=t||{},e.postMessage(this._makeMessage(t),"*")},this.sendPromise=function(e,t){t=t||{};var n=this._makePromise();return t.promiseIndex=n,this.sendMessage(e,t),this._promises[n]}}var i=e("./shared/_top"),o=i?top:window,s=["jet:msg"];a.prototype={unload:function(){this.removeListener(),this.__namespaces__=[]},init:function(){return this.source=window,this.boundOnMessage=this._messageHandler.bind(this),this.source.addEventListener?this.source.addEventListener("message",this.boundOnMessage,!1):this.source.attachEvent&&this.source.attachEvent("onmessage",this.boundOnMessage,!1),this},removeListener:function(){this.source.removeEventListener?this.source.removeEventListener("message",this.boundOnMessage,!1):this.source.detachEvent&&this.source.detachEvent("onmessage",this.boundOnMessage,!1)},_makePromise:function(){var e=this,t=this._promiseIndex++ +"_"+this.name;return this._promises[t]=new Promise(function(n,r){e._deferreds[t]={resolve:n,reject:r}}),t},_getPromise:function(e){return this._deferreds[e]},_cleanPromise:function(e,t){this._deferreds[e]=t,this._promises[e]=t},_resolvePromise:function(e,t){var n=this._getPromise(e);if(n&&n.resolve)if(n.resolve(t),this.sameWindowStrategy){var r=this;setTimeout(function(){r._cleanPromise(e,"resolved")},1e3)}else this._cleanPromise(e,"resolved")},_rejectPromise:function(e,t){var n=this._getPromise(e);n&&n.reject&&(n.reject(t),this._cleanPromise(e,"rejected"))},_parseData:function(e){var t=s.length;if(t>0)for(var n=0;n<t;n++){var r=s[n];if("[object String]"==Object.prototype.toString.call(e)){if(e.match(r)){e=e.replace(r,"");try{return JSON.parse(e)}catch(e){}}}else if("object"==typeof e)return e}else try{return JSON.parse(e)}catch(e){}},addSanitizedFuncName:function(e){this._sanitaryFunctions?this._sanitaryFunctions=new RegExp(this._sanitaryFunctions.source+"|"+e):this._sanitaryFunctions=new RegExp(e)},_isSanitaryFunction:function(e){return this._sanitaryFunctions?e.match(this._sanitaryFunctions)?e:void 0:e},_makeMessage:function(e){e=e||{};var t="";return e.parseKey&&(t+=e.parseKey),t+JSON.stringify({params:e.params,promiseIndex:e.promiseIndex,funcName:e.funcName,parseKey:e.parseKey,attachSource:e.attachSource,senderId:"acs--jet--"+this.name,name:this.name})},_messageHandler:function(e){var t=(e.source,e.origin,this._parseData(e.data));t&&!t.targetId?t.funcName&&this._handleMessage(e.source,t):t&&r(t.senderId)&&this._handleEikonMessage(t)},_messageHandlerSameWindow:function(e,t){t&&!t.targetId?t.funcName&&this._handleMessage(e,t):this._handleEikonMessage(t)},_handleMessage:function(e,t){function n(t){t=t||{},t.parseKey="jet:msg",r.sendMessage(e,t)}var r=this,a=t.funcName,i=t.params,o=t.promiseIndex,s=t.attachSource;switch(a){case"handshake":this.sendMessage(e,{promiseIndex:o,parseKey:t.parseKey,funcName:"replyHandshake"});break;case"replyHandshake":this._resolvePromise(o,!0);break;case"replyPromiseResolve":this._resolvePromise(o,i);break;case"replyPromiseReject":this._rejectPromise(o,i);break;case"getRegisterData":this.registerData&&o?this.sendMessage(e,{promiseIndex:o,parseKey:t.parseKey,funcName:"replyRegisterData",params:this.registerData}):this.sendMessage(e,{promiseIndex:o,parseKey:t.parseKey,funcName:"replyRegisterData"});break;case"replyRegisterData":i?this._resolvePromise(o,i):this._rejectPromise(o,!1);break;default:if(s&&i.unshift(e),o){var u,c;c=this.__getFunc(a),c&&(u=c[a],"function"==typeof u&&u.apply(c,i).then(function(t){var r={funcName:"replyPromiseResolve",source:e,params:t,promiseIndex:o};n(r)},function(e){var t={funcName:"replyPromiseReject",params:[e],promiseIndex:o};n(t)}))}else c=this.__getFunc(a),c&&(u=c[a],"function"==typeof u&&u.apply(c,i))}},_handleEikonMessage:function(e){this.sendMessage(o,{parseKey:"jet:msg",params:[e.data],attachSource:!0,funcName:"_onProcessEventWithSource"})},__namespaces__:[],registerNamespace:function(e){this.__namespaces__.push(e)},__getFunc:function(e){for(var t=void 0,n=this.__namespaces__,r=n.length,a=0;a<r;a++){var i=n[a];if(i[e]){t=i;break}}return t}},t.exports=a},{"./shared/_top":29}],23:[function(e,t,n){function r(e){h.length&&h.forEach(function(t){e.sendMessageToBus(t)}),h=[]}var a,i=0,o={},s={},u=e("./stubs/registerConfiguration"),c="jet:msg",h=[],d=!1,l=e("./shared/_top"),f=l?top:window;t.exports={sendMessageToBus:function(e){a?a.sendMessage(f,e):h.push(e)},sendPromiseToBus:function(e){return a.sendPromise(f,e)},setBus:function(e){a=e},getChannelHandlers:function(){return o},getChannelHandler:function(e){return e?o[e]:void 0},getEventHandlers:function(){return s},getEventHandler:function(e){return e?s[e]:void 0},_addHandlerHelper:function(e,t){var n,r=i++,a=this,o=e.name||e.channel;return n={id:r,handler:e.handler,context:e.context||window,unsubscribe:function(){return a.__unsubscribe({id:r,key:o},t)}},this.__addSubscriptionToBucket(e,n,t),{unsubscribe:function(){return a.__unsubscribe({id:r,key:o},t)}}},__addSubscriptionToBucket:function(e,t,n){var r,a=e.name||e.channel;if(a)return r=n[a],r?r.push(t):n[a]=[t],n[a]},ACShandshake:function(){return this.sendPromiseToBus({parseKey:"jet:msg",funcName:"handshake",params:[]})},ACSpollForInitData:function(){return this.sendPromiseToBus({funcName:"getRegisterData",parseKey:"jet:msg",attachSource:!0})},JETRegisterRequest:function(e){var t=u(e);return this.sendPromiseToBus({parseKey:"jet:msg",funcName:"_registerJETApp",params:[t]})},_setRegisterData:function(e,t){d=!0,r(this),e.subApp?this.ACSpollForInitData():this.sendMessageToBus({funcName:"setRegisterData",parseKey:"jet:msg",params:[e]})},callEventHandler:function(e){return this.doEvent(e)},doEvent:function(e){var t;t="string"==typeof e?JSON.parse(e):e;var n,r,a=t.name;if(a&&(n=this.getEventHandler(a)),n&&n.forEach(function(e){e.handler&&(r=e.handler.apply(e.context,[t]))}),r)return r},addEventHandler:function(e,t,n){this._addHandlerHelper({name:e,handler:n?function(e){return t.call(window,e.data)}:t,context:void 0},s)},processEvent:function(e){this.sendMessageToBus({parseKey:"jet:msg",funcName:"_processEvent",params:[e],attachSource:!0})},publish:function(e,t){var n={channel:e,data:t};this.sendMessageToBus({parseKey:"jet:msg",funcName:"_publish",params:[n]})},publishWithPipeTarget:function(e,t,n){var r={channel:e,data:t,pipe:!0};n&&(r.target=n),this.sendMessageToBus({parseKey:"jet:msg",funcName:"_publishWithPipeTarget",params:[r]})},_emitSubscribe:function(e){var t={type:e.type,data:{channel:e.channel}};this.sendMessageToBus({parseKey:"jet:msg",funcName:"_subscribe",params:[t.data],attachSource:!0})},subscribe:function(e){e=e||{};var t=this.addSubscriptionHandler(e);return this._emitSubscribe(e),t},_emitSubscribeWithPipeTarget:function(e){this.sendMessageToBus({parseKey:"jet:msg",funcName:"_subscribeWithPipeTarget",params:[e],attachSource:!0})},subscriptionWithPipeTarget:function(e){e=e||{};var t=this.addSubscriptionHandler(e);return this._emitSubscribeWithPipeTarget(e),t},addSubscriptionHandler:function(e){return this._addHandlerHelper(e,this.getChannelHandlers())},_callSubscriptionsHelper:function(e,t){var n,r;if(e&&(n=this.getChannelHandlers(e)),n&&n.forEach(function(e){var n=e.handler;n&&(r=n.apply(e.context,t))}),r)return r},unsubscribeChannel:function(e){return e=e||{},e.key=e.channel,this.__unsubscribe(e,this.getChannelHandlers())},__unsubscribe:function(e,t){e=e||{};var n=e.key,r=t[n],a=e.id,i=!1;if(a&&"number"==typeof a&&Array.isArray(r)){for(var o=0;o<r.length;o++)if(r[o].id===a){r.splice(o,1);break}0===r.length&&(i=!0)}else i=!0;i&&void 0!==r&&(this.__emitUnsubscribe({channel:n}),delete t[n])},__emitUnsubscribe:function(e){this.sendMessageToBus({parseKey:"jet:msg",funcName:"_unsubscribe",params:[e],attachSource:!0})},unsubscribeAll:function(){for(var e=this.getChannelHandlers(),t=Object.keys(e),n=t.length,r=0;r<n;r++){var a=e[t[r]];a&&a.forEach(function(e){e.unsubscribe&&e.unsubscribe()}),null===e[t[r]]&&(this.__emitUnsubscribe({channel:t[r]}),delete e[t[r]])}},callSubscriptions:function(e,t){var n,r,a=e.channel;if(a&&(n=this.getChannelHandler(a)),n&&n.forEach(function(e){var n=e.handler;n&&(r=n.apply(e.context,t))}),r)return r},getContainerData:function(e){return this.sendPromiseToBus({parseKey:"jet:msg",funcName:"getData",params:[e]})},getFromContainer:function(e,t){
return this.sendPromiseToBus({parseKey:"jet:msg",funcName:"_fromContainerAsync",params:[e,t]})},toContainerAsync:function(e,t){return this.sendPromiseToBus({parseKey:"jet:msg",funcName:"_toContainerAsync",params:[e,t]})},setLogLevel:function(e){this.sendMessageToBus({parseKey:"jet:msg",funcName:"_setLoggingLevel",params:[e]})},emitBoundProp:function(e,t,n){this.sendMessageToBus({parseKey:c,funcName:"_setBoundedProp",params:[{name:e,key:t,value:n}]})}}},{"./shared/_top":29,"./stubs/registerConfiguration":39}],24:[function(e,t,n){var r=e("./UtilLogger"),a=e("./JETCore"),i=e("./shared/deferred"),o=e("./router");a.plugin(function(){return{name:"UserInfo",api:{getUserInfo:function(){return r.debug("JET.getUserInfo called."),i(function(){return o.getContainerData({name:"UserInfo"})},function(e){return e},function(e){console.log("could not get userinfo")})}}}})},{"./JETCore":17,"./UtilLogger":26,"./router":23,"./shared/deferred":33}],25:[function(e,t,n){var r=[],a=e("./UtilLogger"),i=e("./shared/mixin"),o=e("./router"),s=e("./JETProperties"),u=e("./shared/boundObjects"),c=e("./stubs/commandBar"),h={addEvent:function(e,t,n){return r.push({source:e,key:t,func:n}),e.addEventListener&&e.addEventListener(t,n),e.attachEvent&&e.attachEvent("on"+t,n),n},removeEvent:function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n),e.detachEvent&&e.detachEvent("on"+t,n)},unsubscribeAll:function(){for(var e=0;e<r.length;e++){var t=r[e];this.removeEvent(t.source,t.key,t.func)}},stopBubbling:function(){var e;window.event?e=window.event:window.frames[0]&&window.frames[0].event&&(e=window.frames[0].event),e&&(e.preventDefault?(e.preventDefault(),e.stopPropagation()):(e.cancelBubble=!0,e.returnValue=!1))},addOnUnload:function(e){this.addEvent(window,"unload",function(){e.apply(window,arguments)})},addHandlers:function(e,t){e.forEach(function(e){t[e]=function(t){return o.addEventHandler(e,t,!0)}})},getComponentDescription:function(e){var t={properties:this.properties(),entities:e.Context||[]};return this.commandline()&&(t.toolbar=c),u.description=t,t},properties:function(e){if(!e)return u.properties},commandline:function(e){if(!arguments.length)return s.commandline},apptitlebar:function(e){if(!arguments.length)return s.apptitlebar},appmenu:function(e){if(!e)return s.appmenu}};t.exports=h,i(h,a)},{"./JETProperties":20,"./UtilLogger":26,"./router":23,"./shared/boundObjects":30,"./shared/mixin":36,"./stubs/commandBar":37}],26:[function(e,t,n){function r(){for(var e=[],t=arguments.length,n=0;n<t;n++)e.push(arguments[n]);e=e.map(function(e){return"function"==typeof e?e():"string"==typeof e?e:e?Array.isArray(e)?e.join(" "):JSON.stringify(e):""}),console.log(e.join(""))}function a(e){return i<=e?function(){r.apply(this,arguments)}:function(){}}var i,o=e("./router"),s=["trace","debug","info","warn","error"],u={setLogLevel:function(e){var t=s.indexOf(e);t===-1&&(t=2),this.setLogOptions(t),o.setLogLevel(t)},setLogOptions:function(e){i=void 0===e||null===e?10:e,this.trace=a(0),this.debug=a(1),this.info=a(2),this.warn=a(3),this.error=a(4)}};t.exports=u},{"./router":23}],27:[function(e,t,n){var r=e("./JETCore"),a=e("./router");r.plugin(function(){function e(){r.ContainerDescription&&r.ContainerDescription.windowInfo&&r.ContainerDescription.windowInfo.windowId&&(s=r.ContainerDescription.windowInfo.windowId)}function t(e){if(s&&e.data){var t=e.data;if(t.windowId&&t.windowId===s&&t.event)switch(t.event){case"linked":u.forEach(function(e){e.call(window,{groupId:t.groupId})});break;case"unlinked":c.forEach(function(e){e.call(window,{groupId:t.groupId})});break;case"linkStatus":t.isLinked&&u.forEach(function(e){e.call(window,{groupId:t.groupId})})}}}function n(){r.subscribe("/container_events",i)}function i(e){if(e=JSON.parse(e),e&&e.name)switch(e.name){case"LinkChannel":t(e)}}function o(){if(s){var e={name:"LinkChannel",data:{action:"GetLinkStatus",windowId:s}};r.publish("/container_actions",JSON.stringify(e))}}r.onLoad(function(){e(),n(),o()});var s=null,u=[],c=[];return{name:"Window",api:{resizeTo:function(e,t,n){n===!0&&(e+=window.outerWidth-window.innerWidth,t+=window.outerHeight-window.innerHeight),a.processEvent({name:"onResize",data:{width:e,height:t}})},resizeBy:function(e,t){a.processEvent({name:"onResize",data:{width:window.outerWidth+e,height:window.outerHeight+t}})},hide:function(){a.processEvent({name:"onHide",data:null})},show:function(){a.processEvent({name:"onShow",data:null})},flash:function(e){a.processEvent({name:"onFlash",xmlData:e})},stopFlash:function(){a.processEvent({name:"onStopFlash",data:null})},onLinked:function(e){u.push(e)},onUnlinked:function(e){c.push(e)}}}})},{"./JETCore":17,"./router":23}],28:[function(e,t,n){e("./Util");var r=e("./JETCore");e("./JETPlugins"),e("./JETPubSub"),e("./FullAPI"),e("./FullAPIViewRequests"),e("./FullAPIArchive"),e("./FullAPILogger"),e("./FullAPIDragAndDrop"),e("./UserInfo"),e("./Window"),window._hasJET&&window._hasJET(),t.exports=r},{"./FullAPI":12,"./FullAPIArchive":13,"./FullAPIDragAndDrop":14,"./FullAPILogger":15,"./FullAPIViewRequests":16,"./JETCore":17,"./JETPlugins":19,"./JETPubSub":21,"./UserInfo":24,"./Util":25,"./Window":27}],29:[function(e,t,n){var r=!1;try{window.top&&(r=!0)}catch(e){r=!1}t.exports=r},{}],30:[function(e,t,n){var r=e("./boundProp"),a="dataProviders",i={};r(i,a,"helpurl"),r(i,a,"context"),r(i,a,"properties"),r(i,a,"persistdata"),r(i,a,"description"),r(i,a,"inputowner",!1),t.exports=i},{"./boundProp":31}],31:[function(e,t,n){var r=e("./emittedProp"),a=e("../router");t.exports=function(e,t,n,i){return i&&a.emitBoundProp(t,n,i),r(e,n,t,function(e,t,n){a.emitBoundProp(e,t,n)})}},{"../router":23,"./emittedProp":34}],32:[function(e,t,n){t.exports=function(e){function t(){n=[],r=0}var n=[],r=0;return{push:function(e){n[r]=e,r++},run:function(e){e=e||window;for(var a=Array.prototype.slice.call(arguments,1),i=0;i<r;i++){var o=n[i];o.call(e,a)}t()}}}},{}],33:[function(e,t,n){t.exports=function(e,t,n){var r={},a=new Promise(function(e,t){r.resolve=e,r.reject=t});return e().then(function(e){t?r.resolve(t(e)):r.resolve(e)},function(e){n?r.reject(n(e)):r.reject(e)}),a}},{}],34:[function(e,t,n){t.exports=function(e,t,n,r){var a=void 0;Object.defineProperty(e,t,{get:function(){return a},set:function(e){r(n,t,e),a=e}})}},{}],35:[function(e,t,n){function r(e){if(!Array.isArray(e))return e;var t={};return e.forEach(function(e){e.name&&(t[e.name]=e)}),t}t.exports=function(e,t){e=r(e),t=r(t);for(var n in t){var a=t[n],i=null,o=null;if(a&&a.name)i=a.name,o=a.text||a.value||"";else for(var s in a)if(a.hasOwnProperty(s)){i=s,o=a[s]||"";break}null!==i&&null!==o&&(e[i]={value:o,type:a.type||"xs:string",access:"ro"===a.access?"ro":"rw"})}return e}},{}],36:[function(e,t,n){function r(e,t){for(var n in t)e[n]=t[n];return e}t.exports=function(e){for(var t=1,n=arguments.length;t<n;t++)r(e||{},arguments[t]);return e}},{}],37:[function(e,t,n){t.exports={commandBars:[{items:[{item:"Search"}]}]}},{}],38:[function(e,t,n){t.exports={getDataQueue:[],processEventQueue:[],getData:function(e){this.getDataQueue.push(e)},processEvent:function(e){this.processEventQueue.push(e)}}},{}],39:[function(e,t,n){t.exports=function(e){var t={version:"3.3.0",id:e.ID};return e.AppId&&(t.appId=e.AppId),{domain:"EikonJET",xmlData:t,method:"registerWithCCF"}}},{}]},{},[28]);
//# sourceMappingURL=JET.min.js.map